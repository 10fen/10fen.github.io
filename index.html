<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>ååˆ†å¯¼èˆª</title>
    <link rel="apple-touch-icon-precomposed" href="titleIcon.svg" />
    <meta name="msapplication-TileImage" content="titleIcon.svg" />
    <link rel="shortcut icon" href="titleIcon.svg" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="full-screen" content="yes">
    <!--UCå¼ºåˆ¶å…¨å±-->
    <!--UCåº”ç”¨æ¨¡å¼-->
    <meta name="x5-fullscreen" content="true">
    <!--QQå¼ºåˆ¶å…¨å±-->
    <meta name="x5-page-mode" content="app">
    <!--QQåº”ç”¨æ¨¡å¼-->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" async
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
         -->
    
        <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet"  integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <!-- <link rel="stylesheet" id="font-awesome-css"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css?ver=1.1422" async
        type="text/css" media="all"> -->
    <!-- appå›¾æ ‡ -->
    <script src="https://at.alicdn.com/t/c/font_3778090_tmyugzygmyj.js"></script>
    <!-- å¼•å…¥jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <!-- å¼•å…¥Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="sou.js"></script>
        <link rel="stylesheet" href="style.css">
    <script>
        // ç¡®ä¿å›¾æ ‡åº“åŠ è½½å®Œæˆåæ¸²æŸ“SVG
        function initIconSupport() {
            // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒSVG
            if (document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")) {
                // ç¡®ä¿useæ ‡ç­¾è¢«æ­£ç¡®è§£æ
                if (window.addEventListener) {
                    window.addEventListener('load', function() {
                        // å»¶è¿Ÿæ¸²æŸ“ï¼Œç¡®ä¿å›¾æ ‡åº“å®Œå…¨åŠ è½½
                        setTimeout(function() {
                            // åªå¤„ç†å›¾æ ‡åº“ä¸­çš„SVGå…ƒç´ ï¼ˆå…·æœ‰useæ ‡ç­¾çš„SVGï¼‰
                            const svgs = document.querySelectorAll('svg.icon');
                            for (let svg of svgs) {
                                // æ£€æŸ¥SVGæ˜¯å¦åŒ…å«useæ ‡ç­¾
                                const useElement = svg.querySelector('use');
                                if (useElement) {
                                    // é‡æ–°åŠ è½½SVGå›¾æ ‡ï¼Œä½†ä¸æ”¹å˜DOMç»“æ„
                                    const parent = svg.parentNode;
                                    if (parent) {
                                        // é‡æ–°è®¾ç½®useæ ‡ç­¾çš„xlink:hrefå±æ€§æ¥åˆ·æ–°å›¾æ ‡
                                        const href = useElement.getAttribute('xlink:href');
                                        if (href) {
                                            useElement.setAttribute('xlink:href', '');
                                            useElement.setAttribute('xlink:href', href);
                                        }
                                    }
                                }
                            }
                        }, 100);
                    }, false);
                }
            }
        }
        initIconSupport();
    </script>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "tq2pdbn6ra");
    </script>
    
    <!-- æ•°æ®å­˜å‚¨å’Œåˆå§‹åŒ–åŠŸèƒ½ -->
    <script>
        // å®šä¹‰æ•°æ®ç»“æ„
        const DEFAULT_STORAGE_KEY = 'fenNavigationData';
        let isEditMode = false; // ç¼–è¾‘æ¨¡å¼çŠ¶æ€
        
        // åˆå§‹åŒ–æ•°æ®å­˜å‚¨
        function initializeStorage() {
            // æ£€æŸ¥localStorageä¸­æ˜¯å¦å­˜åœ¨æ•°æ®
            if (!localStorage.getItem(DEFAULT_STORAGE_KEY)) {
                // åˆå§‹åŒ–é»˜è®¤æ•°æ®ç»“æ„
                const initialData = {
                    customSites: {},
                    deletedSites: [],
                    siteOrder: {},
                    customCategories: []
                };
                localStorage.setItem(DEFAULT_STORAGE_KEY, JSON.stringify(initialData));
            }
        }
        
        // ä»localStorageè¯»å–æ•°æ®
        function loadStoredData() {
            try {
                const storedData = localStorage.getItem(DEFAULT_STORAGE_KEY);
                return storedData ? JSON.parse(storedData) : null;
            } catch (error) {
                console.error('è¯»å–å­˜å‚¨æ•°æ®æ—¶å‡ºé”™:', error);
                return null;
            }
        }
        
        // ä¿å­˜æ•°æ®åˆ°localStorage
        function saveStoredData(data) {
            try {
                localStorage.setItem(DEFAULT_STORAGE_KEY, JSON.stringify(data));
                return true;
            } catch (error) {
                console.error('ä¿å­˜æ•°æ®æ—¶å‡ºé”™:', error);
                return false;
            }
        }
        
        // éšè—äºŒç»´ç å›¾ç‰‡
        function hideQRCode() {
            console.log('hideQRCode function called');
            try {
                // éšè—æ¨¡æ€æ¡†
                const qrModal = document.getElementById('qrModal');
                const modalBackdrop = document.getElementById('modalBackdrop');
                
                if (qrModal) {
                    qrModal.style.display = 'none';
                }
                
                if (modalBackdrop) {
                    modalBackdrop.style.display = 'none';
                }
            } catch (error) {
                console.error('Error in hideQRCode function:', error);
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–å­˜å‚¨
        document.addEventListener('DOMContentLoaded', function() {
            initializeStorage();
        });
    </script>
</head>

<body>
    <!--è§†é¢‘å¤´éƒ¨èƒŒæ™¯-->
    <div class="banner-video">
        <img data-src="https://gitee.com/shao_1/shortcut/raw/master/th3.jpeg"
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" 
        class="lazy-image"
        loading="lazy"
            alt="" referrerpolicy="no-referrer">
        <div class="bottom-cover"
            style="background-image: linear-gradient(rgba(255, 255, 255, 0) 0%, rgb(244 248 251 / 0.6) 50%, rgb(244 248 251) 100%);">
        </div>
    </div>


<style>
    /* å ä½å›¾æ ·å¼ */
    .lazy-image {
      width: 100%;
      height: auto;
      background: #f0f0f0;
      transition: opacity 0.3s;
    }
    
    /* åŠ è½½å®Œæˆåæ˜¾ç¤º */
    .lazy-image.loaded {
      opacity: 1;
    }
    </style>
    
    <script>
    // å¢å¼ºå‹æ‡’åŠ è½½ï¼ˆå…¼å®¹æ—§æµè§ˆå™¨ï¼‰
    document.addEventListener('DOMContentLoaded', () => {
      const lazyImages = [].slice.call(document.querySelectorAll('img[data-src]'));
    
      if ('loading' in HTMLImageElement.prototype) {
        // æµè§ˆå™¨æ”¯æŒ loading="lazy"
        lazyImages.forEach(img => {
          img.src = img.dataset.src;
          img.classList.add('loaded');
        });
      } else {
        // é™çº§æ–¹æ¡ˆï¼šIntersection Observer
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.src = img.dataset.src;
              img.classList.add('loaded');
              observer.unobserve(img);
            }
          });
        });
        lazyImages.forEach(img => observer.observe(img));
      }
    });
    </script>


    <!--topbarå¼€å§‹-->
    <style>
        .navbar-toggler svg {
            width: 24px;
            height: 24px;
        }

        .navbar-toggler .bi-list-nested {
            display: none;
        }

        .navbar-toggler.collapsed .bi-list-nested {
            display: block;
        }

        .navbar-toggler.collapsed .bi-x {
            display: none;
        }

        .navbar-toggler .bi-x {
            display: block;
        }
    </style>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="position: absolute; z-index: 10000;">
        <a class="navbar-brand" id="manghelucky" style="color:#fff;font-size:15px;" href="#" 
            onclick=" urlList=['https://yanhua.netlify.app/','https://ilove.works','https://liferestart.syaro.io/public/index.html','https://www.bilibili.com/video/BV1m4411b7fb','https://ac.yunyoujun.cn','https://juhaodong.github.io/CaiHongPi/','https://saythemoney.github.io','https://dujitang.netlify.app','http://www.ipanda.com/zb/index.shtml?guid=xiongmao03&url=xiongmao03&image=//p1.img.cctvpic.com/uploadimg/2018/04/28/1524908553796421.jpg&id=2&title=å¹¼å¹´å›­A-æˆéƒ½å¤§ç†ŠçŒ«ç¹è‚²ç ”ç©¶åŸºåœ°_ç†ŠçŒ«é¢‘é“','https://pointerpointer.com'];  window.open(urlList[Math.floor(Math.random()*urlList.length)],'_blank');"
            target="_blank">ğŸå¼€ä¸ªç›²ç›’</a>
        <a class="navbar-brand" id="wannnengai" style="color:#fff;font-size:15px;" href="https://docs.qq.com/sheet/DSkVDaGpoaVVDVFpM?tab=BB08J2" 
            target="_blank">æ¨èç½‘ç«™</a>
        
        <!-- è®¾ç½®æŒ‰é’® -->
        <button id="settings-btn" class="btn btn-sm ml-auto mr-3" style="color: white; background: transparent;">æˆ‘è¦è‡ªå®šä¹‰</button>
        
        <div class="collapse navbar-collapse" id="navbarsExample05">
            <style>
                #he-plugin-simple {
                    z-index: 1000;
                }
            </style>
            <div id="he-plugin-simple"></div>
            <script>
                WIDGET = {
                    CONFIG: {
                        "modules": "01234",
                        "background": 5,
                        "tmpColor": "310f1b",
                        "tmpSize": 14,
                        "cityColor": "310f1b",
                        "citySize": 14,
                        "aqiSize": 14,
                        // "weatherIconSize": 22,
                        "alertIconSize": 16,
                        "padding": "8px 8px 8px 8px",
                        "shadow": "1",
                        "language": "auto",
                        "borderRadius": 5,
                        "fixed": "false",
                        "vertical": "middle",
                        "horizontal": "center",
                        "key": "acd0fdcab4b9481a98d0f59145420fac"
                    }
                }
            </script>
            <!-- <script src="https://widget.heweather.net/simple/static/js/he-simple-common.js?v=1.1"></script> -->

        </div>
    </nav>
    <!-- å¼•å…¥SortableJS -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <!--topbarç»“æŸ-->
    <div class="container" style="margin-top: 100px; position: relative; z-index: 100;">
        <!--æœç´¢å¼€å§‹-->
        <div id="search" class="s-search">
            <div id="search-list" class="hide-type-list">
                <div class="search-group group-a s-current">
                    <ul class="search-type">
                        <li><input checked="" hidden="" type="radio" name="type" id="type-baidu"
                                value="https://www.baidu.com/s?wd=" data-placeholder="ç™¾åº¦ä¸€ä¸‹"><label
                                for="type-baidu"><span style="color:#000000;">ç™¾åº¦</span></label></li>
                        <!-- <li><input hidden="" type="radio" name="type" id="type-google" value="https://g.luciaz.me/search?q=" data-placeholder="è°·æ­Œæœç´¢(å¯ç”¨ï¼Œä½ è¯•è¯•)"><label for="type-google"><span style="color:#3B83FA">G</span><span style="color:#F3442C">o</span><span style="color:#FFC300">o</span><span style="color:#4696F8">g</span><span style="color:#2CAB4E">l</span><span style="color:#F54231">e</span></label></li> -->
                        <li><input hidden="" type="radio" name="type" id="type-google"
                                value="https://yandex.com/search/?text=" data-placeholder="ä¿„ç½—æ–¯æœç´¢"><label
                                for="type-google"><span style="color:#000000;">ä¿„æœ</span></label></li>
                        <li><input hidden="" type="radio" name="type" id="type-cupfox" value="https://v.ikanbot.com/search?q="
                                data-placeholder="ç”µå½±ã€å‰§é›†ã€ç»¼è‰ºã€åŠ¨æ¼«"><label for="type-cupfox"><span
                                    style="color:#000000">å½±è§†</span></label></li>
                        <li><input hidden="" type="radio" name="type" id="type-bookso"
                                value="https://sobooks.cc/search/" data-placeholder="è¾“å…¥ä¹¦åæˆ–ä½œè€…åï¼ˆä¸‹è½½éªŒè¯ç ï¼š244152ï¼‰"><label
                                for="type-bookso"><span style="color:#310f1b">å›¾ä¹¦</span></label></li>
                        <li><input hidden="" type="radio" name="type" id="type-wangpan"
                                value="https://bbs.alipansou.com/?q="
                                data-placeholder="ç½‘ç›˜æœç´¢ éªŒè¯ç 0861"><label for="type-wangpan"><span
                                    style="color: #000000">ç½‘ç›˜</span></label></li>
                        <!-- <li><input hidden="" type="radio" name="type" id="type-aiso" value="https://phind.com/search?q=" data-placeholder="chatGPTåŠ æŒ"><label for="type-aiso"><span style="color:#f1e788">AIæœç´¢</span></label></li> -->

                        <li><input hidden="" type="radio"
                                onclick="if (this.checked){window.location='weixin://dl/business/?appid=wx83df613582159d24&path=pages/home/index'}"
                                name="type" id="type-quan"
                                value="https://xdeafnn4.jutuike.cn/#/pages/search/search?dsSource=taobao&pub_id=37384&keywords="
                                data-placeholder="å¤–å–éœ¸ç‹é¤"><label for="type-quan"><span
                                    style="color:#000000;">ğŸ”¥éœ¸ç‹é¤</span></label></li>
                    </ul>
                </div>
            </div>
            <form action="https://www.baidu.com/s?wd=" method="get" target="_blank" id="super-search-fm">
                <input type="text" id="search-text" placeholder="ç™¾åº¦ä¸€ä¸‹" style="outline:0" autocomplete="off">
                <button class="submit" type="submit" id="search-button" style="position:absolute;top:0;right:0;background:#fff;border:0;width:50px;height:50px;margin:0; outline: none; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 0 5px 5px 0; z-index: 10;">
                    <!-- è‡ªå®šä¹‰SVGæœç´¢å›¾æ ‡ -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11" cy="11" r="7" stroke="#29f" stroke-width="2"/>
                        <path d="M20 20L17 17" stroke="#29f" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <ul id="word" style="display: none;"></ul>
            </form>
            <div class="set-check hidden-xs">
                <input type="checkbox" id="set-search-blank" class="bubble-3" autocomplete="off">
            </div>
        </div>
        
        <!-- ç¼–è¾‘æ¨¡å¼å·¥å…·æ  -->
        <div id="edit-toolbar" class="edit-toolbar" style="display: none; margin-bottom: 20px;">
            <button id="add-site-btn" class="btn btn-primary mr-2">æ·»åŠ ç½‘ç«™</button>
            <button id="export-config-btn" class="btn btn-success mr-2">å¯¼å‡ºé…ç½®</button>
            <button id="import-config-btn" class="btn btn-info mr-2">å¯¼å…¥é…ç½®</button>
            <button id="change-bg-btn" class="btn btn-warning mr-2">ä¿®æ”¹èƒŒæ™¯</button>
            <button id="reset-default-btn" class="btn btn-danger mr-2">æ¢å¤é»˜è®¤</button>
            <button id="done-edit-btn" class="btn btn-secondary">å®Œæˆ</button>
        </div>
        
        <!-- éšè—çš„æ–‡ä»¶è¾“å…¥å…ƒç´ ï¼Œç”¨äºå¯¼å…¥é…ç½® -->
        <input type="file" id="import-file-input" accept=".json" style="display: none;">
        
        <!-- éšè—çš„æ–‡ä»¶è¾“å…¥å…ƒç´ ï¼Œç”¨äºèƒŒæ™¯å›¾ä¸Šä¼  -->
        <input type="file" id="bg-image-input" accept="image/*" style="display: none;">
        
        <!-- æ¨¡æ€æ¡†èƒŒæ™¯ -->
        <div class="modal-backdrop fade" id="modalBackdrop" style="display: none; z-index: 10000;" onclick="hideQRCode()"></div>
        
        <!-- æ·»åŠ ç½‘ç«™æ¨¡æ€æ¡† -->
        <div class="modal fade" id="siteModal" tabindex="-1" role="dialog" aria-labelledby="siteModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="siteModalLabel">æ·»åŠ ç½‘ç«™</h5>
                    </div>
                    <div class="modal-body">
                        <form id="siteForm">
                            <div class="form-group">
                                <label for="siteCategory">ç±»åˆ«</label>
                                <select class="form-control" id="siteCategory" required>
                                    <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="siteName">ç½‘ç«™åç§°</label>
                                <input type="text" class="form-control" id="siteName" required>
                            </div>
                            <div class="form-group">
                                <label for="siteUrl">ç½‘ç«™URL</label>
                                <input type="url" class="form-control" id="siteUrl" required>
                            </div>
                            <div class="form-group">
                                <label for="siteIcon">ç½‘ç«™å›¾æ ‡</label>
                                <div class="d-flex align-items-center">
                                    <img id="iconPreview" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="å›¾æ ‡é¢„è§ˆ" style="width: 32px; height: 32px; border-radius: 50%; background: #f0f0f0; display: none; margin-right: 10px;">
                                    <div id="textIconPreview" style="width: 32px; height: 32px; border-radius: 50%; background: #1890ff; color: white; display: none; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold;"></div>
                                    <span id="iconStatus">æ­£åœ¨è·å–å›¾æ ‡...</span>
                                </div>
                                <input type="hidden" id="siteIcon" value="">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                        <button type="button" class="btn btn-primary" id="saveSiteBtn">ä¿å­˜</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="container"></div>

        <script>
            // å®šä¹‰è¦ç”Ÿæˆçš„æ•°æ®
            const data = [
                {
                    title: "æ–°é²œçƒ­é—¨",
                    items: [
                        { id: "weibo", href: "https://s.weibo.com/top/summary?cate=realtimehot", icon: "icon-weibo", text: "å¾®åšçƒ­æ¦œ" },
                        { id: "douyin", href: "https://tophub.today/n/DpQvNABoNE", icon: "icon-douyin", text: "æŠ–éŸ³çƒ­é—¨è§†é¢‘" },
                        { id: "baidu-hot", href: "https://tophub.today/n/8Rv2x2ReLw", icon: "icon-xiaojizidian", text: "ç™¾åº¦çƒ­æ¢—æ¦œ" },
                        { id: "douban-new", href: "https://movie.douban.com/explore?support_type=movie&is_all=false&category=%E7%83%AD%E9%97%A8&type=%E5%85%A8%E9%83%A8", icon: "icon-douban", text: "è±†ç“£æ–°ç‰‡æ¦œ" }
                    ]
                },
                {
                    title: "å½±è§†å¨±ä¹",
                    items: [
                        { id: "iqiyi", href: "https://www.iqiyi.com/", icon: "icon-aiqiyi", text: "çˆ±å¥‡è‰º" },
                        { id: "vqq", href: "https://v.qq.com/", icon: "icon-tengxunshipin", text: "è…¾è®¯è§†é¢‘" },
                        { id: "bili", href: "https://www.bilibili.com/", icon: "icon-bilibili1", text: "å“”å“©å“”å“©" },
                        { id: "doubandianying", href: "https://movie.douban.com/", icon: "icon-douban", text: "è±†ç“£ç”µå½±" },
                        { id: "ikanbot", href: "https://www.ikanbot.com/", icon: "icon-ikanbot", text: "çˆ±çœ‹æœºå™¨äºº" },
                        { id: "libvio", href: "https://www.libvio.me/", icon: "icon-libvio", text: "Libvio" },
                        { id: "ddys", href: "https://ddys.tv/", icon: "icon-ddys", text: "ä½ç«¯å½±è§†" },
                        { id: "netflix", href: "https://www.nfyingshi.com/", icon: "icon-netflix", text: "å¥ˆéå½±è§†" },
                        { id: "dianshi", href: "https://www.xuexi.cn/3271716c843e44c7e00e66e38ad6fcd5/e2c3733327a5a413f63fc980e92f4552.html", icon: "icon-dianshi", text: "ç”µè§†ç›´æ’­" },
                        { id: "freeok", href: "https://freeok.zip/", icon: "icon-bofang", text: "FreeOK" },
                        { id: "JOJO", href: "https://gaze.run/", icon: "icon-jojo", text: "æ³¨è§†å½±éŸ³" },
                        { id: "chabeihu", href: "https://www.hanjukankan.com/", icon: "icon-hulinew", text: "éŸ©å‰§åº“" },
                        { id: "hdmoli", href: "https://www.hdmoli.pro/", icon: "icon-shipin", text: "hdmoli" },
                        { id: "dm5", href: "https://www.dm5.com/", icon: "icon-dongmanwu", text: "åŠ¨æ¼«å±‹" },
                        { id: "yinghuadongman", href: "https://www.yinhuadm.xyz/label/hot.html", icon: "icon-dongman", text: "æ¨±èŠ±åŠ¨æ¼«" },
                        { id: "dilidili", href: "https://dilidili3.com/", icon: "icon-dilidili", text: "å˜€å“©å˜€å“©" }
                    ]
                },
                {
                    title: "å›¾ä¹¦é˜…è¯»",
                    items: [
                        { id: "jmsoshu", href: "https://www.jiumodiary.com/", icon: "icon-jmsoshu", text: "é¸ æ‘©æœä¹¦" },
                        { id: "ZLibrary", href: "https://z-lib.my/", icon: "icon-ZLibrary", text: "ZLibrary" },
                        { id: "wdxsw", href: "https://sobooks.cc/", icon: "icon-wdxsw", text: "å°ä¹¦å±‹" },
                        { id: "baoshuwang", href: "https://bun.godamh.com/", icon: "icon-baoshuwang", text: "åŒ…å­æ¼«ç”»" },
                        { id: "weixindushu", href: "https://weread.qq.com/", icon: "icon-weixindushu", text: "å¾®ä¿¡è¯»ä¹¦" },
                        { id: "dashumanhua", href: "https://www.dashumanhua.com/", icon: "icon-dashumanhua", text: "å¤§æ ‘æ¼«ç”»" },
                        { id: "manhuamao", href: "https://www.soman.com/", icon: "icon-manhuamao", text: "æœæ¼«" },
                        { id: "zhuanhuan", href: "https://convertio.co/zh/epub-mobi/", icon: "icon-zhuanhuan", text: "æ ¼å¼è½¬æ¢" }
                    ]
                },
                {
                    title: "ç½‘ç›˜æœç´¢",
                    items: [
                        { id: "upso", href: "https://bbs.alipansou.com", icon: "icon-upso", text: "äº‘ç›˜ä¹äº«" },
                        { id: "daliso", href: "https://dapanso.com/", icon: "icon-daliso", text: "å¤§åŠ›ç›˜" },
                        { id: "dashengso", href: "https://www.dashengpan.com/", icon: "icon-dashengso", text: "å¤§åœ£ç›˜æœ" },
                        { id: "jiheso", href: "https://pan.qianfan.app", icon: "icon-jiheso", text: "åƒå¸†æœç´ " },
                        { id: "xiaozhan", href: "https://pan666.net/", icon: "icon-jiheso", text: "æˆ‘çš„å°ç«™" },
                        { id: "maolipansou", href: "https://alipansou.com/", icon: "icon-jiheso", text: "çŒ«ç‹¸ç›˜æœ" }
                    ]
                },
                {
                    title: "çœé’±åˆé›†",
                    items: [
                        { id: "meituanwaimai", href: "https://dpurl.cn/rWzPB6ez", icon: "icon-meituan", text: "ç¾å›¢å¤–å–çº¢åŒ…" },
                        { id: "bawangcan", href: "https://offsiteact.meituan.com/act/cps/promotion?p=527655265a5844839670f60a53927313&utm_content=0c3bfd35279b4140b3bd8ecbc41301d6__91265975a81c487c933ed18a27ca0ad5", icon: "icon-bawangcan", text: "å¤–å–è¯•åƒå®˜" },  
                        { id: "eleme", href: "https://m.duanqu.com/?_ariver_appid=8251537&page=plugin-private%3A%2F%2F2021003183669766%2Fpages%2Fh5%2Findex%3FconfigKey%3DPAGE_TAOBAO_CATER%26scene%3Dfd63bcda7edf4db89aa84a1c5e4ac3c9", icon: "icon-eleme", text: "é¥¿äº†ä¹ˆçº¢åŒ…" },
                        { id: "didi", href: "https://ut-static.udache.com/t-painter/toggle/painter/base/1734142323a71160853ed44ee8a4310e510c2dd53c.png", icon: "icon-didichuxing", text: "æ»´æ»´æ‰“è½¦åˆ¸" },
                        { id: "xiaozhu", href: "https://ut-static.udache.com/t-painter/toggle/painter/base/173414236843ce38e3733d40779ff808d6117f9e55.png", icon: "icon-xiaozhu", text: "èŠ±å°çŒªæ‰“è½¦åˆ¸" },
                        { id: "jikuaidi", href: "https://kzurl19.cn/59Ru6", icon: "icon-kuaidi", text: "çœé’±å¯„å¿«é€’" },
                        { id: "kandianying", href: "https://kzurl14.cn/Ws27i", icon: "icon-huiyuan", text: "8æŠ˜ç”µå½±ç¥¨" },
                        { id: "naicha", href: "https://dpurl.cn/yHGz1jCz", icon: "icon-naicha", text: "8æŠ˜å¥¶èŒ¶" },
                        { id: "kfc", href: "https://qz-m.dtsoft.cn/kfc/?platformId=10435&token=eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3MDA4ODM5ODEsInVzZXJJZCI6NDQzOTk4ODMsInVzZXJOYW1lIjoianV0dWlrZSIsInRva2VuVHlwZSI6MH0.pQm8bhSMRsSRSM_4PPL3zxnRDQ-XzlzpgHVdkJ2r0O8&backIndex=true&backIndexType=0&subPlatformId=37384jutuikeoneforall", icon: "icon-kfc", text: "8æŠ˜åƒKFC" },
                        { id: "maidanglao", href: "https://ot.jfshou.cn/api/mcdonald/entrance?shareCode=615NBXBL3&timestamp=1700279224766&extra=37384jutuikeoneforall&userId=37384jutuikeoneforall&sign=92B11CA0AA96060FF966F47471B5D305", icon: "icon-maidanglao", text: "8æŠ˜éº¦å½“åŠ³" },
                        { id: "liuliangka", href: "https://kzurl19.cn/7ckiOM", icon: "icon-zhongguoyidong", text: "å¤§æµé‡å¡" },
                        { id: "huafei", href: "https://nice.vip35.cn/", icon: "icon-huafeichongzhi", text: "æŠ˜æ‰£è¯è´¹" },
                        { id: "dianfei", href: "https://nice.vip35.cn/", icon: "icon-dianfei", text: "æŠ˜æ‰£ç”µè´¹" },
                        { id: "ranqi", href: "https://nice.vip35.cn/", icon: "icon-hot", text: "æŠ˜æ‰£ç‡ƒæ°”" },
                        { id: "youhuiquan", href: "https://xdeafnn4.jutuike.cn/#/pages/shop/shop?code=xdeafnN4&showMenu=false", icon: "icon-taobao", text: "è´­ç‰©ä¼˜æƒ åˆ¸" },
                    ]
                },
                {
                    title: "AIå·¥å…·",
                    items: [
                        { id: "deepseek", href: "https://www.deepseek.com/", icon: "icon-goupi", text: "deepseek" },
                        { id: "metaso", href: "https://metaso.cn/", icon: "icon-xiaojizidian", text: "ç§˜å¡”AI" },
                        { id: "nancnn", href: "https://www.n.cn/", icon: "icon-dujitand", text: "çº³ç±³AI" },
                        { id: "chaoshuan", href: "https://chat.scnet.cn/#/home", icon: "icon-ikanbot", text: "å›½å®¶è¶…ç®—å¹³å°" },
                        { id: "aippt", href: "https://www.aippt.cn?utm_type=ppt&utm_source=bdb&utm_page=aippt&utm_plan=bd&utm_unit=bdq&utm_keyword=40229876", icon: "icon-chishenme", text: "AI PPT" },
                        { id: "kimi", href: "https://kimi.moonshot.cn/", icon: "icon-ikanbot", text: "kimié•¿æ€è€ƒ" }
                    ]
                },
                {
                    title: "æœ‰è¶£å¥½ç©",
                    items: [
                        { id: "xiaobawang", href: "https://www.yikm.net/", icon: "icon-youxi", text: "åœ¨çº¿å°éœ¸ç‹" },
                        { id: "dujitang", href: "https://dujitang.netlify.app/", icon: "icon-dujitand", text: "æ¯’é¸¡æ±¤" },
                        { id: "biaoqingbao", href: "https://www.dbbqb.com/", icon: "icon-xiaojizidian", text: "è¡¨æƒ…åŒ…å¤§å…¨" },
                        { id: "goupibuwenzhang", href: "https://suulnnka.github.io/BullshitGenerator/index.html", icon: "icon-goupi", text: "ç‹—å±ä¸é€šæ–‡ç« " },
                        { id: "chishenme", href: "https://chishenme.xyz/", icon: "icon-chishenme", text: "ä»Šå¤©åƒä»€ä¹ˆ" },
                        { id: "lifeRestart", href: "https://liferestart.syaro.io/public/index.html", icon: "icon-chishenme", text: "äººç”Ÿé‡å¼€æ¨¡æ‹Ÿå™¨" }
                    ]
                },
                {
                    title: "å®ç”¨å·¥å…·",
                    items: [
                        { id: "moyu", href: "https://cnxiaobai.com/articles/2022/03/29/1648541960488.html", icon: "icon-hua", text: "æ‘¸é±¼ç¥å™¨" },
                        { id: "weixinniqi", href: "https://blog.itakeo.com/help", icon: "icon-shengchengmoxing", text: "å¾®ä¿¡æ¨¡æ‹Ÿå™¨" },
                        { id: "pengyoujizan", href: "https://akarin.dev/WechatMomentScreenshot", icon: "icon-pengyoujizan", text: "æœ‹å‹åœˆé›†èµç¥å™¨" },
                        { id: "fanxingzidian", href: "https://wantwords.net/", icon: "icon-fanxingzidian", text: "æ¸…ååå‘è¯å…¸" },
                        { id: "jiantaoshu", href: "https://jts.egg404.cn/#/", icon: "icon-zuoye", text: "æ£€è®¨ä¹¦ç”Ÿæˆå™¨" },
                        { id: "wikihow", href: "https://zh.wikihow.com/%E9%A6%96%E9%A1%B5", icon: "icon-wikihow", text: "ä¸‡äº‹æŒ‡å—" },
                        { id: "wenlianyun", href: "https://easylink.cc", icon: "icon-shengchengmoxing", text: "æ–‡ä»¶äº‘é“¾ç”Ÿæˆå™¨" },
                        { id: "chatgpt", href: "https://chatgpts.ninvfeng.xyz", icon: "icon-ikanbot", text: "chatGPTåˆé›†" },
                        { id: "xiaohongshu", href: "https://www.wenanabc.xyz", icon: "icon-ikanbot", text: "å°çº¢ä¹¦æ–‡æ¡ˆç”Ÿæˆ" },
                        { id: "freeGPT", href: "https://chatr.free2gpt.xyz", icon: "icon-ikanbot", text: "å…è´¹chatGPT" }
                    ]
                },
                {
                    title: "å¥½å¥½å­¦ä¹ ",
                    items: [
                        { id: "163open", href: "https://open.163.com/", icon: "icon-wangyi", text: "ç½‘æ˜“å…¬å¼€è¯¾" },
                        { id: "ted", href: "https://open.163.com/ted/", icon: "icon-TED", text: "TED" },
                        { id: "bilibilixuexi", href: "https://www.bilibili.com/v/channel/802163/?tab=featured", icon: "icon-bxuexi", text: "Bç«™å­¦ä¹ åŒº" },
                        { id: "coursera", href: "https://www.coursera.org/", icon: "icon-coursera", text: "coursera" },
                        { id: "qinghua", href: "https://www.xuetangx.com/", icon: "icon-qinghua", text: "æ¸…åå¤§å­¦å…¬å¼€è¯¾" },
                        { id: "beida", href: "http://cetl.pku.edu.cn/peking/opencourse/view3/oc_index.jsp", icon: "icon-beida", text: "åŒ—äº¬å¤§å­¦å…¬å¼€è¯¾" },
                        { id: "mook", href: "https://www.icourse163.org/", icon: "icon-mooc", text: "æ…•è¯¾ç½‘" },
                        { id: "hafo", href: "https://mp.weixin.qq.com/mp/homepage?__biz=MzU4MDc1MjA1Nw==&hid=3&sn=715546ee143c7396ee28f8fa27850e9f/", icon: "icon-jijixinli", text: "å“ˆä½›ç§¯æå¿ƒç†å­¦" }
                    ]
                }
            ];
        </script>


    </div>
    <!--ç‰ˆæƒä¿¡æ¯å¼€å§‹-->
    <p class="mt-5 mb-3 text-muted text-center">
        <span id="busuanzi_container_site_pv">æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡</span>
        <span id="busuanzi_container_site_uv">ï¼Œå…±è®¡<span id="busuanzi_value_site_uv"></span>äººè®¿é—®</span>
    </p>
    <!--
-->
    <!--ç‰ˆæƒä¿¡æ¯ç»“æŸ-->
    <script>
        // ä½¿ç‰¹å®šæ–‡æœ¬åŠ ç²—å’Œç€è‰²
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®æœç´¢ç±»å‹ä¸­çš„ä¿„æœæ–‡æœ¬ä¸ºé»‘è‰²ï¼ˆä¸åŠ ç²—ï¼‰
            const yandexLabel = document.querySelector('label[for="type-google"] span');
            if (yandexLabel) {
                yandexLabel.style.color = '#000000';
            }
            
            // åŠ ç²—å¹¶è®¾ç½®æœç´¢ç±»å‹ä¸­çš„è¯•åƒå®˜æ–‡æœ¬ä¸ºçº¢è‰²
            const shichiguanLabel = document.querySelector('label[for="type-quan"] span');
            if (shichiguanLabel) {
                shichiguanLabel.style.fontWeight = 'bold';
                shichiguanLabel.style.color = '#ff0000';
            }
            
            // è®¾ç½®æœç´¢ç±»å‹ä¸­çš„ç½‘ç›˜æ–‡æœ¬ä¸ºé»‘è‰²
            const wangpanLabel = document.querySelector('label[for="type-wangpan"] span');
            if (wangpanLabel) {
                wangpanLabel.style.color = '#000000';
            }
            
            // è®¾ç½®æœç´¢ç±»å‹ä¸­çš„å½±è§†æ–‡æœ¬ä¸ºæ·±è‰²
            const yingshiLabel = document.querySelector('label[for="type-cupfox"] span');
            if (yingshiLabel) {
                yingshiLabel.style.color = '#000000';
            }
            
            // åŠ ç²—å¹¶è®¾ç½®ç½‘ç«™åˆ—è¡¨ä¸­çš„å¤–å–è¯•åƒå®˜æ–‡æœ¬ä¸ºçº¢è‰²
            const trialTexts = document.querySelectorAll('.mylist li.col-3 span');
            trialTexts.forEach(function(span) {
                if (span.textContent.includes('å¤–å–è¯•åƒå®˜')) {
                    span.style.fontWeight = 'bold';
                    span.style.color = '#ff0000';
                }
            });
            
            // è®¾ç½®æœç´¢ç±»å‹ä¸­çš„ç™¾åº¦æ–‡æœ¬ä¸ºé»‘è‰²ï¼ˆä¸åŠ ç²—ï¼‰
            const baiduLabel = document.querySelector('label[for="type-baidu"] span');
            if (baiduLabel) {
                baiduLabel.style.color = '#000000';
            }
        });
        
        eval(function (e, t, a, c, i, n) {
            if (i = function (e) {
                return (e < t ? "" : i(parseInt(e / t))) + (35 < (e %= t) ? String.fromCharCode(e + 29) : e.toString(36))
            }, !"".replace(/^/, String)) {
                for (; a--;) n[i(a)] = c[a] || i(a);
                c = [function (e) {
                    return n[e]
                }], i = function () {
                    return "\\w+"
                }, a = 1
            }
            for (; a--;) c[a] && (e = e.replace(new RegExp("\\b" + i(a) + "\\b", "g"), c[a]));
            return e
        }('!2(){2 g(){h(),i(),j(),k()}2 h(){d.9=s()}2 i(){z a=4.8(\'A[B="7"][5="\'+p()+\'"]\');a&&(a.9=!0,l(a))}2 j(){v(u())}2 k(){w(t())}2 l(a){P(z b=0;b<e.O;b++)e[b].I.1c("s-M");a.F.F.F.I.V("s-M")}2 m(a,b){E.H.S("L"+a,b)}2 n(a){6 E.H.Y("L"+a)}2 o(a){f=a.3,v(u()),w(a.3.5),m("7",a.3.5),c.K(),l(a.3)}2 p(){z b=n("7");6 b||a[0].5}2 q(a){m("J",a.3.9?1:-1),x(a.3.9)}2 r(a){6 a.11(),""==c.5?(c.K(),!1):(w(t()+c.5),x(s()),s()?E.U(b.G,+T X):13.Z=b.G,10 0)}2 s(){z a=n("J");6 a?1==a:!0}2 t(){6 4.8(\'A[B="7"]:9\').5}2 u(){6 4.8(\'A[B="7"]:9\').W("14-N")}2 v(a){c.1e("N",a)}2 w(a){b.G=a}2 x(a){a?b.3="1a":b.16("3")}z y,a=4.R(\'A[B="7"]\'),b=4.8("#18-C-19"),c=4.8("#C-12"),d=4.8("#17-C-15"),e=4.R(".C-1b"),f=a[0];P(g(),y=0;y<a.O;y++)a[y].D("Q",o);d.D("Q",q),b.D("1d",r)}();', 62, 77, "||function|target|document|value|return|type|querySelector|checked||||||||||||||||||||||||||var|input|name|search|addEventListener|window|parentNode|action|localStorage|classList|newWindow|focus|superSearch|current|placeholder|length|for|change|querySelectorAll|setItem|new|open|add|getAttribute|Date|getItem|href|void|preventDefault|text|location|data|blank|removeAttribute|set|super|fm|_blank|group|remove|submit|setAttribute".split("|"), 0, {}));
    </script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script> -->

    <!-- åŸºæœ¬äº¤äº’é€»è¾‘ -->
    <script>
        // è¿›å…¥ç¼–è¾‘æ¨¡å¼
        function enterEditMode() {
            isEditMode = true;
            document.getElementById('edit-toolbar').style.display = 'block';
            document.getElementById('settings-btn').style.display = 'none';
            updateEditButtons();
            
            // åˆå§‹åŒ–æ‹–æ‹½åŠŸèƒ½
            initSortable();
        }
        
        // é€€å‡ºç¼–è¾‘æ¨¡å¼
        function exitEditMode() {
            isEditMode = false;
            document.getElementById('edit-toolbar').style.display = 'none';
            document.getElementById('settings-btn').style.display = 'block';
            updateEditButtons();
            
            // ä¿å­˜æ•°æ®åˆ°localStorage
            const storedData = loadStoredData();
            if (storedData) {
                // è¿™é‡Œåº”è¯¥ä¿å­˜å½“å‰çš„è‡ªå®šä¹‰æ•°æ®
                // ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æš‚æ—¶åªä¿å­˜ä¸€ä¸ªæ ‡è®°
                saveStoredData(storedData);
            }
        }
        
        // æ›´æ–°ç¼–è¾‘æŒ‰é’®çš„æ˜¾ç¤ºçŠ¶æ€
        function updateEditButtons() {
            // è·å–æ‰€æœ‰ç½‘ç«™å›¾æ ‡å®¹å™¨
            const siteItems = document.querySelectorAll('.col-3');
            
            // æ ¹æ®ç¼–è¾‘æ¨¡å¼çŠ¶æ€æ˜¾ç¤ºæˆ–éšè—ç¼–è¾‘æŒ‰é’®
            siteItems.forEach(item => {
                // æŸ¥æ‰¾æˆ–åˆ›å»ºåˆ é™¤æŒ‰é’®
                let deleteBtn = item.querySelector('.delete-button');
                if (isEditMode && !deleteBtn) {
                    deleteBtn = document.createElement('div');
                    deleteBtn.className = 'edit-button delete-button';
                    deleteBtn.innerHTML = 'Ã—';
                    item.style.position = 'relative'; // ç¡®ä¿ç›¸å¯¹å®šä½
                    item.appendChild(deleteBtn);
                    
                    // ç»‘å®šåˆ é™¤äº‹ä»¶
                    deleteBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç½‘ç«™å—ï¼Ÿ')) {
                            deleteSite(item);
                        }
                    });
                } else if (!isEditMode && deleteBtn) {
                    deleteBtn.remove();
                }
                
                // æŸ¥æ‰¾æˆ–åˆ›å»ºç¼–è¾‘æŒ‰é’®
                let editBtn = item.querySelector('.edit-item-button');
                if (isEditMode && !editBtn) {
                    editBtn = document.createElement('div');
                    editBtn.className = 'edit-button edit-item-button';
                    editBtn.innerHTML = 'âœ';
                    item.style.position = 'relative'; // ç¡®ä¿ç›¸å¯¹å®šä½
                    item.appendChild(editBtn);
                    
                    // ç»‘å®šç¼–è¾‘äº‹ä»¶
                    editBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        editSite(item);
                    });
                } else if (!isEditMode && editBtn) {
                    editBtn.remove();
                }
            });
        }
        
        // åˆå§‹åŒ–æ‹–æ‹½åŠŸèƒ½
        function initSortable() {
            // è·å–æ‰€æœ‰ç±»åˆ«åˆ—è¡¨
            const lists = document.querySelectorAll('.mylist .row');
            
            lists.forEach(list => {
                // é”€æ¯å·²æœ‰çš„Sortableå®ä¾‹
                if (list.sortable) {
                    list.sortable.destroy();
                }
                
                // åˆ›å»ºæ–°çš„Sortableå®ä¾‹
                const sortable = new Sortable(list, {
                    animation: 150,
                    ghostClass: 'sortable-ghost',
                    onEnd: function(evt) {
                        // æ›´æ–°æ’åºä¿¡æ¯
                        updateSiteOrder(list);
                    }
                });
                
                // ä¿å­˜Sortableå®ä¾‹å¼•ç”¨
                list.sortable = sortable;
            });
        }
        
        // æ›´æ–°ç½‘ç«™æ’åº
        function updateSiteOrder(list) {
            // è·å–ç±»åˆ«æ ‡é¢˜
            const titleElement = list.closest('.mylist').querySelector('.title');
            const category = titleElement.textContent.replace(/\s+/g, ' ').trim();
            
            // è·å–æ’åºåçš„IDåˆ—è¡¨
            const orderedIds = [];
            list.querySelectorAll('.col-3').forEach(item => {
                orderedIds.push(item.id);
            });
            
            // æ›´æ–°å­˜å‚¨æ•°æ®
            const storedData = loadStoredData();
            if (storedData) {
                storedData.siteOrder[category] = orderedIds;
                saveStoredData(storedData);
            }
        }
        
        // åˆ é™¤ç½‘ç«™åŠŸèƒ½
        function deleteSite(item) {
            // è·å–ç½‘ç«™ID
            const siteId = item.id;
            
            // ä»DOMä¸­ç§»é™¤
            item.remove();
            
            // æ›´æ–°å­˜å‚¨æ•°æ®
            const storedData = loadStoredData();
            if (storedData) {
                // å°†IDæ·»åŠ åˆ°åˆ é™¤åˆ—è¡¨
                if (!storedData.deletedSites.includes(siteId)) {
                    storedData.deletedSites.push(siteId);
                }
                
                // ä¿å­˜æ•°æ®
                const success = saveStoredData(storedData);
                
                // é‡æ–°æ¸²æŸ“é¡µé¢
                if (success) {
                    renderSites();
                } else {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥');
                }
            }
        }
        
        // å¡«å……ç±»åˆ«é€‰é¡¹
        function populateCategoryOptions() {
            const categorySelect = document.getElementById('siteCategory');
            // æ¸…ç©ºç°æœ‰é€‰é¡¹
            categorySelect.innerHTML = '';
            
            // è·å–æ‰€æœ‰ç°æœ‰ç±»åˆ«
            const categories = [];
            document.querySelectorAll('.mylist .title').forEach(title => {
                const categoryName = title.textContent.replace(/\s+/g, ' ').trim();
                if (!categories.includes(categoryName)) {
                    categories.push(categoryName);
                }
            });
            
            // æ·»åŠ é€‰é¡¹
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categorySelect.appendChild(option);
            });
        }
        
        // è·å–ç½‘ç«™å›¾æ ‡
        function getFavicon(url, siteName) {
            return new Promise((resolve) => {
                console.log('å¼€å§‹è·å–å›¾æ ‡ï¼ŒURL:', url);
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                document.getElementById('iconStatus').textContent = 'æ­£åœ¨è·å–å›¾æ ‡...';
                document.getElementById('iconPreview').style.display = 'none';
                document.getElementById('textIconPreview').style.display = 'none';
                
                // ä»URLä¸­æå–åŸŸå
                try {
                    let domain;
                    
                    // å¦‚æœURLä¸åŒ…å«åè®®ï¼Œæ·»åŠ é»˜è®¤åè®®
                    if (!url.startsWith('http://') && !url.startsWith('https://')) {
                        url = 'http://' + url;
                    }
                    
                    domain = new URL(url).hostname;
                    
                    // ç›´æ¥ä½¿ç”¨favicon.icoè·å–å›¾æ ‡
                    const faviconUrl = `https://${domain}/favicon.ico`;
                    
                    console.log('æ„é€ çš„favicon URL:', faviconUrl);
                    
                    // ç›´æ¥æ˜¾ç¤ºå›¾æ ‡
                    const img = document.getElementById('iconPreview');
                    img.onload = function() {
                        console.log('å›¾æ ‡åŠ è½½æˆåŠŸï¼Œsrc:', img.src);
                        console.log('å›¾æ ‡å®½åº¦:', img.naturalWidth, 'é«˜åº¦:', img.naturalHeight);
                        img.style.display = 'block';
                        document.getElementById('iconStatus').textContent = 'å›¾æ ‡è·å–æˆåŠŸ';
                        // å°†å›¾æ ‡URLå­˜å‚¨åˆ°éšè—å­—æ®µ
                        document.getElementById('siteIcon').value = faviconUrl;
                        resolve(faviconUrl);
                    };
                    img.onerror = function() {
                        console.log('å›¾æ ‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡');
                        // å›¾æ ‡è·å–å¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡
                        useTextIcon(siteName);
                        resolve('text');
                    };
                    img.src = faviconUrl;
                } catch (e) {
                    console.log('URLè§£æå¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡:', e);
                    // URLè§£æå¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡
                    useTextIcon(siteName);
                    resolve('text');
                }
            });
        }
        
        // å°è¯•ä½¿ç”¨Google faviconæœåŠ¡
        function tryGoogleFavicon(domain, siteName, resolve) {
            const googleFaviconUrl = `https://www.google.com/s2/favicons?domain=${domain}`;
            console.log('å°è¯•ä½¿ç”¨Google faviconæœåŠ¡:', googleFaviconUrl);
            
            const img = new Image();
            img.onload = function() {
                console.log('Googleå›¾æ ‡åŠ è½½æˆåŠŸï¼Œå°ºå¯¸:', img.width, 'x', img.height);
                if (img.width > 0 && img.height > 0) {
                    // å›¾æ ‡è·å–æˆåŠŸï¼Œè½¬æ¢ä¸ºbase64
                    getBase64FromImage(googleFaviconUrl).then(base64 => {
                        console.log('Googleå›¾æ ‡è½¬æ¢ä¸ºbase64æˆåŠŸ');
                        document.getElementById('iconPreview').src = base64;
                        document.getElementById('iconPreview').style.display = 'block';
                        document.getElementById('iconStatus').textContent = 'å›¾æ ‡è·å–æˆåŠŸ';
                        document.getElementById('siteIcon').value = base64;
                        resolve(base64);
                    });
                } else {
                    // å›¾æ ‡è·å–å¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡
                    console.log('Googleå›¾æ ‡å°ºå¯¸æ— æ•ˆï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡');
                    useTextIcon(siteName);
                    resolve('text');
                }
            };
            img.onerror = function() {
                console.log('Googleå›¾æ ‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡');
                // å›¾æ ‡è·å–å¤±è´¥ï¼Œä½¿ç”¨æ–‡å­—å›¾æ ‡
                useTextIcon(siteName);
                resolve('text');
            };
            img.src = googleFaviconUrl;
        }
        
        // å°†å›¾ç‰‡è½¬æ¢ä¸ºbase64
        function getBase64FromImage(url) {
            return new Promise((resolve) => {
                console.log('å¼€å§‹è½¬æ¢å›¾ç‰‡ä¸ºbase64ï¼ŒURL:', url);
                const img = new Image();
                img.crossOrigin = 'Anonymous';
                img.onload = function() {
                    console.log('å›¾ç‰‡åŠ è½½æˆåŠŸï¼Œå¼€å§‹è½¬æ¢ä¸ºbase64');
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    const base64 = canvas.toDataURL('image/png');
                    console.log('base64è½¬æ¢å®Œæˆï¼Œé•¿åº¦:', base64.length);
                    resolve(base64);
                };
                img.onerror = function() {
                    console.log('å›¾ç‰‡åŠ è½½å¤±è´¥');
                    resolve('');
                };
                img.src = url;
            });
        }
        
        // ä½¿ç”¨æ–‡å­—ä½œä¸ºå›¾æ ‡
        function useTextIcon(siteName) {
            console.log('ä½¿ç”¨æ–‡å­—å›¾æ ‡ï¼Œç½‘ç«™åç§°:', siteName);
            // è·å–ç½‘ç«™åç§°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦
            let firstChar = '';
            if (siteName && siteName.length > 0) {
                firstChar = siteName.charAt(0).toUpperCase();
            } else {
                firstChar = 'W'; // é»˜è®¤å­—ç¬¦
            }
            
            // éšè—å›¾ç‰‡å›¾æ ‡ï¼Œæ˜¾ç¤ºæ–‡å­—å›¾æ ‡
            document.getElementById('iconPreview').style.display = 'none';
            document.getElementById('textIconPreview').textContent = firstChar;
            document.getElementById('textIconPreview').style.display = 'flex';
            document.getElementById('iconStatus').textContent = 'ä½¿ç”¨æ–‡å­—å›¾æ ‡';
            document.getElementById('siteIcon').value = 'text:' + firstChar;
            console.log('æ–‡å­—å›¾æ ‡è®¾ç½®å®Œæˆï¼Œå­—ç¬¦:', firstChar);
        }
        
        // ä¿å­˜ç½‘ç«™
        function saveSite() {
            // è·å–è¡¨å•æ•°æ®
            const category = document.getElementById('siteCategory').value;
            const name = document.getElementById('siteName').value;
            let url = document.getElementById('siteUrl').value;
            const icon = document.getElementById('siteIcon').value || 'icon-hua'; // é»˜è®¤å›¾æ ‡
            
            console.log('ä¿å­˜ç½‘ç«™ï¼Œè¡¨å•æ•°æ®:', {category, name, url, icon});
            
            // ç®€å•éªŒè¯
            if (!category || !name || !url) {
                alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ');
                return;
            }
            
            // éªŒè¯å¹¶å¤„ç†URLæ ¼å¼
            try {
                new URL(url);
                console.log('URLéªŒè¯æˆåŠŸ');
            } catch (e) {
                console.log('URLéªŒè¯å¤±è´¥ï¼Œå°è¯•æ·»åŠ åè®®:', e);
                // å¦‚æœURLä¸åŒ…å«åè®®ï¼Œæ·»åŠ é»˜è®¤åè®®
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'http://' + url;
                    // æ›´æ–°è¡¨å•ä¸­çš„URLå€¼
                    document.getElementById('siteUrl').value = url;
                }
                
                // å†æ¬¡éªŒè¯
                try {
                    new URL(url);
                    console.log('æ·»åŠ åè®®åURLéªŒè¯æˆåŠŸ');
                } catch (e) {
                    console.log('æ·»åŠ åè®®åURLéªŒè¯ä»ç„¶å¤±è´¥:', e);
                    alert('è¯·è¾“å…¥æœ‰æ•ˆçš„URL');
                    return;
                }
            }
            
            // ç”Ÿæˆå”¯ä¸€ID
            const id = 'custom_' + Date.now();
            
            // åˆ›å»ºç½‘ç«™é¡¹ç›®å¯¹è±¡
            console.log('åˆ›å»ºç½‘ç«™é¡¹ç›®å¯¹è±¡ï¼Œiconå€¼:', icon);
            const siteItem = {
                id: id,
                href: url,
                icon: icon,
                text: name
            };
            
            // æ›´æ–°å­˜å‚¨æ•°æ®
            const storedData = loadStoredData();
            if (storedData) {
                // å¦‚æœç±»åˆ«ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°ç±»åˆ«
                if (!storedData.customSites[category]) {
                    storedData.customSites[category] = [];
                }
                
                // æ·»åŠ åˆ°è‡ªå®šä¹‰ç½‘ç«™
                storedData.customSites[category].push(siteItem);
                
                // æ›´æ–°æ’åºä¿¡æ¯
                if (!storedData.siteOrder[category]) {
                    storedData.siteOrder[category] = [];
                }
                storedData.siteOrder[category].push(id);
                
                // ä¿å­˜æ•°æ®
                const success = saveStoredData(storedData);
                
                // å…³é—­æ¨¡æ€æ¡†
                // ä½¿ç”¨Bootstrapçš„åŸç”Ÿæ–¹æ³•
                closeModal();
                
                // é‡æ–°æ¸²æŸ“é¡µé¢
                if (success) {
                    renderSites();
                } else {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥');
                }
            }
        }
        
        // ç¼–è¾‘ç½‘ç«™åŠŸèƒ½
        function editSite(item) {
            // è·å–ç½‘ç«™ID
            const siteId = item.id;
            
            // ä¿å­˜å½“å‰ç¼–è¾‘çš„ç½‘ç«™IDåˆ°å…¨å±€å˜é‡
            window.currentEditSiteId = siteId;
            
            // è·å–å½“å‰ç½‘ç«™ä¿¡æ¯
            let siteInfo = null;
            let category = null;
            
            // éå†æ•°æ®æ‰¾åˆ°å¯¹åº”çš„ç½‘ç«™
            const storedData = loadStoredData();
            if (storedData) {
                // æ£€æŸ¥è‡ªå®šä¹‰ç½‘ç«™
                for (const cat in storedData.customSites) {
                    const site = storedData.customSites[cat].find(s => s.id === siteId);
                    if (site) {
                        siteInfo = site;
                        category = cat;
                        break;
                    }
                }
                
                // å¦‚æœåœ¨è‡ªå®šä¹‰ç½‘ç«™ä¸­æ²¡æ‰¾åˆ°ï¼Œæ£€æŸ¥é»˜è®¤æ•°æ®
                if (!siteInfo) {
                    for (const section of data) {
                        const site = section.items.find(s => s.id === siteId);
                        if (site) {
                            siteInfo = {...site}; // å¤åˆ¶é»˜è®¤ç½‘ç«™ä¿¡æ¯
                            category = section.title;
                            break;
                        }
                    }
                }
            }
            
            if (siteInfo) {
                // å¡«å……æ¨¡æ€æ¡†
                document.getElementById('siteForm').reset();
                document.getElementById('siteModalLabel').textContent = 'ç¼–è¾‘ç½‘ç«™';
                document.getElementById('siteName').value = siteInfo.text;
                document.getElementById('siteUrl').value = siteInfo.href;
                document.getElementById('siteIcon').value = siteInfo.icon;
                
                // å¡«å……ç±»åˆ«é€‰é¡¹å¹¶è®¾ç½®é€‰ä¸­å€¼
                populateCategoryOptions();
                document.getElementById('siteCategory').value = category;
                
                // æ˜¾ç¤ºæ¨¡æ€æ¡†
                document.getElementById('siteModal').classList.add('show');
                document.getElementById('siteModal').style.display = 'block';
                document.body.classList.add('modal-open');
            }
        }
        
        // æ‰“å¼€æ¨¡æ€æ¡†
        function openModal() {
            document.getElementById('siteModal').classList.add('show');
            document.getElementById('siteModal').style.display = 'block';
            document.getElementById('modalBackdrop').style.display = 'block';
            document.getElementById('modalBackdrop').classList.add('show');
            document.body.classList.add('modal-open');
        }
        
        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('siteModal').classList.remove('show');
            document.getElementById('siteModal').style.display = 'none';
            document.getElementById('modalBackdrop').style.display = 'none';
            document.getElementById('modalBackdrop').classList.remove('show');
            document.body.classList.remove('modal-open');
        }
        
        // ä¿å­˜ç¼–è¾‘åçš„ç½‘ç«™
        function saveEditedSite(siteId, storedData) {
            // è·å–è¡¨å•æ•°æ®
            const category = document.getElementById('siteCategory').value;
            const name = document.getElementById('siteName').value;
            const url = document.getElementById('siteUrl').value;
            const icon = document.getElementById('siteIcon').value || 'icon-hua'; // é»˜è®¤å›¾æ ‡
            
            // ç®€å•éªŒè¯
            if (!category || !name || !url) {
                alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ');
                return;
            }
            
            // éªŒè¯URLæ ¼å¼
            try {
                new URL(url);
            } catch (e) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„URL');
                return;
            }
            
            // æ›´æ–°å­˜å‚¨æ•°æ®
            if (storedData) {
                // æ£€æŸ¥æ˜¯å¦æ˜¯è‡ªå®šä¹‰ç½‘ç«™
                let isCustomSite = false;
                for (const cat in storedData.customSites) {
                    const index = storedData.customSites[cat].findIndex(s => s.id === siteId);
                    if (index !== -1) {
                        storedData.customSites[cat][index] = {
                            id: siteId,
                            href: url,
                            icon: icon,
                            text: name
                        };
                        isCustomSite = true;
                        break;
                    }
                }
                
                // å¦‚æœä¸æ˜¯è‡ªå®šä¹‰ç½‘ç«™ï¼Œå°†å…¶ä½œä¸ºè‡ªå®šä¹‰ç½‘ç«™æ·»åŠ 
                if (!isCustomSite) {
                    if (!storedData.customSites[category]) {
                        storedData.customSites[category] = [];
                    }
                    storedData.customSites[category].push({
                        id: siteId,
                        href: url,
                        icon: icon,
                        text: name
                    });
                }
                
                // ä¿å­˜æ•°æ®
                const success = saveStoredData(storedData);
                console.log('æ•°æ®ä¿å­˜ç»“æœ:', success);
                
                // å…³é—­æ¨¡æ€æ¡†
                closeModal();
                
                // é‡æ–°æ¸²æŸ“é¡µé¢
                if (success) {
                    renderSites();
                } else {
                    console.error('ä¿å­˜æ•°æ®å¤±è´¥');
                }
            }
        }
        
        // æ¸²æŸ“ç½‘ç«™å‡½æ•°
        function renderSites() {
            console.log('å¼€å§‹æ¸²æŸ“ç½‘ç«™');
            // è·å–å­˜å‚¨çš„æ•°æ®
            const storedData = loadStoredData();
            console.log('å­˜å‚¨çš„æ•°æ®:', storedData);
            if (!storedData) return;
            
            // è°ƒè¯•ï¼šæ£€æŸ¥è‡ªå®šä¹‰ç½‘ç«™æ•°æ®
            console.log('è‡ªå®šä¹‰ç½‘ç«™æ•°æ®:', storedData.customSites);
            // æ£€æŸ¥ç‰¹å®šç½‘ç«™çš„å›¾æ ‡æ•°æ®
            for (const category in storedData.customSites) {
                storedData.customSites[category].forEach(item => {
                    console.log('ç½‘ç«™é¡¹ç›®:', item.id, 'å›¾æ ‡:', item.icon);
                });
            }
            
            // åˆå¹¶é»˜è®¤æ•°æ®å’Œè‡ªå®šä¹‰æ•°æ®
            console.log('åŸå§‹data:', data);
            // åˆå¹¶å…·æœ‰ç›¸åŒæ ‡é¢˜çš„ç±»åˆ«ï¼Œé¿å…é‡å¤ç±»åˆ«
            const mergedData = [];
            const categoryMap = new Map();
            
            // å…ˆå¤„ç†é»˜è®¤æ•°æ®
            data.forEach(section => {
                if (!categoryMap.has(section.title)) {
                    categoryMap.set(section.title, mergedData.length);
                    mergedData.push({...section, items: [...section.items]});
                } else {
                    // åˆå¹¶ç›¸åŒç±»åˆ«çš„é¡¹ç›®
                    const index = categoryMap.get(section.title);
                    mergedData[index].items = [...mergedData[index].items, ...section.items];
                }
            });
            
            console.log('å¤„ç†åçš„mergedData:', mergedData);
            
            // æ·»åŠ è‡ªå®šä¹‰ç±»åˆ«
            for (const category in storedData.customSites) {
                console.log('å¤„ç†è‡ªå®šä¹‰ç±»åˆ«:', category);
                console.log('è‡ªå®šä¹‰ç±»åˆ«æ•°æ®:', storedData.customSites[category]);
                const existingCategoryIndex = mergedData.findIndex(item => item.title === category);
                console.log('existingCategoryIndex:', existingCategoryIndex);
                if (existingCategoryIndex !== -1) {
                    // åˆå¹¶åˆ°ç°æœ‰ç±»åˆ«
                    console.log('åˆå¹¶åˆ°ç°æœ‰ç±»åˆ«:', mergedData[existingCategoryIndex].title);
                    console.log('åˆå¹¶å‰items:', mergedData[existingCategoryIndex].items);
                    // ä½¿ç”¨Setæ¥é¿å…é‡å¤é¡¹
                    const existingIds = new Set(mergedData[existingCategoryIndex].items.map(item => item.id));
                    const uniqueCustomSites = storedData.customSites[category].filter(item => !existingIds.has(item.id));
                    mergedData[existingCategoryIndex].items = [
                        ...mergedData[existingCategoryIndex].items,
                        ...uniqueCustomSites
                    ];
                    console.log('åˆå¹¶åitems:', mergedData[existingCategoryIndex].items);
                } else {
                    // æ·»åŠ æ–°ç±»åˆ«
                    console.log('æ·»åŠ æ–°ç±»åˆ«:', category);
                    mergedData.push({
                        title: category,
                        items: [...storedData.customSites[category]]
                    });
                }
            }
            
            // è°ƒè¯•ï¼šæ£€æŸ¥åˆå¹¶åçš„æ•°æ®
            console.log('åˆå¹¶åçš„æ•°æ®:', mergedData);
            
            // æ£€æŸ¥ç‰¹å®šç½‘ç«™çš„å›¾æ ‡æ•°æ®
            mergedData.forEach(section => {
                section.items.forEach(item => {
                    console.log('æ¸²æŸ“å‰æ£€æŸ¥ - ç½‘ç«™é¡¹ç›®:', item.id, 'å›¾æ ‡:', item.icon);
                });
            });
            
            // è¿‡æ»¤è¢«åˆ é™¤çš„ç½‘ç«™
            console.log('è¿‡æ»¤å‰çš„mergedData:', mergedData);
            mergedData.forEach(section => {
                section.items = section.items.filter(item => !storedData.deletedSites.includes(item.id));
            });
            console.log('è¿‡æ»¤åçš„mergedData:', mergedData);
            
            // åº”ç”¨æ’åº
            console.log('æ’åºå‰çš„mergedData:', mergedData);
            mergedData.forEach(section => {
                if (storedData.siteOrder[section.title]) {
                    // æŒ‰ç…§å­˜å‚¨çš„é¡ºåºé‡æ–°æ’åº
                    console.log('æ’åºå‰çš„section items:', section.title, section.items);
                    section.items.sort((a, b) => {
                        const indexA = storedData.siteOrder[section.title].indexOf(a.id);
                        const indexB = storedData.siteOrder[section.title].indexOf(b.id);
                        return indexA - indexB;
                    });
                    console.log('æ’åºåçš„section items:', section.title, section.items);
                }
            });
            console.log('æ’åºåçš„mergedData:', mergedData);
            
            // ç”ŸæˆHTMLä»£ç 
            let html = "";

            for (const section of mergedData) {
                html += `
              <ul class="mylist row">
                <li class="title"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hua"></use></svg>${section.title}</li>`;

                for (const item of section.items) {
                    // ä¸ºæŠ˜æ‰£è¯è´¹ç‰¹æ®Šå¤„ç†ï¼Œè·³è½¬åˆ°ä¸“é—¨é¡µé¢
                    const isHuafei = item.id === 'huafei';
                    const href = isHuafei ? 'huafei.html' : item.href;
                    html += `
                <li class="col-3 col-sm-3 col-md-3 col-lg-1" id="${item.id}">
                  <a rel="nofollow" href="${href}" target="_blank">`;
                  if (item.icon && typeof item.icon === 'string' && item.icon.startsWith('text:')) {
                    // æ–‡å­—å›¾æ ‡
                    const text = item.icon.substring(5);
                    html += `
                    <div style="width: 45px; height: 45px; border-radius: 10px; background: #1890ff; color: white; display: flex; align-items: center; justify-content: center; margin: 0 auto 5px; font-weight: bold; font-size: 20px;">${text}</div>`;
                  } else if (item.icon && typeof item.icon === 'string' && (item.icon.startsWith('http://') || item.icon.startsWith('https://'))) {
                    // ç›´æ¥é“¾æ¥çš„å›¾ç‰‡å›¾æ ‡
                    html += `
                    <img src="${item.icon}" alt="${item.text}">`;
                  } else {
                    // é»˜è®¤SVGå›¾æ ‡
                    const iconId = item.icon || 'icon-hua';
                    html += `
                    <svg class="icon" aria-hidden="true"><use xlink:href="#${iconId}"></use></svg>`;
                  }
                  
                  html += `
                    <span>${item.text}</span>
                  </a>
                </li>`;
                }

                html += `
              </ul>`;
            }
            
            console.log('ç”Ÿæˆçš„HTML:', html);

            // å°†ç”Ÿæˆçš„HTMLä»£ç æ’å…¥åˆ°é¡µé¢ä¸­çš„å®¹å™¨å…ƒç´ ä¸­
            const container = document.getElementById("container");
            container.innerHTML = html;
            
            // å¦‚æœåœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œéœ€è¦é‡æ–°æ·»åŠ ç¼–è¾‘æŒ‰é’®
            if (isEditMode) {
                updateEditButtons();
                initSortable(); // é‡æ–°åˆå§‹åŒ–æ‹–æ‹½åŠŸèƒ½
            }
        }
        
        // æ£€æŸ¥å’Œä¿®å¤å›¾æ ‡æ˜¾ç¤º
        function checkAndFixIcons() {
            // æ£€æŸ¥é¡µé¢ä¸­æ‰€æœ‰SVGå›¾æ ‡
            const svgIcons = document.querySelectorAll('svg.icon use');
            console.log('æ‰¾åˆ°SVGå›¾æ ‡æ•°é‡:', svgIcons.length);
            
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å›¾æ ‡æˆ–å›¾æ ‡æœªæ­£ç¡®æ˜¾ç¤ºï¼Œåˆ™å°è¯•é‡æ–°æ¸²æŸ“
            if (svgIcons.length > 0) {
                // æ£€æŸ¥å›¾æ ‡æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
                let hasVisibleIcons = false;
                for (let i = 0; i < Math.min(5, svgIcons.length); i++) {
                    const icon = svgIcons[i];
                    const svg = icon.closest('svg');
                    if (svg && svg.getBoundingClientRect().width > 0) {
                        hasVisibleIcons = true;
                        break;
                    }
                }
                
                // å¦‚æœå›¾æ ‡æœªæ­£ç¡®æ˜¾ç¤ºï¼Œå°è¯•é‡æ–°æ¸²æŸ“
                if (!hasVisibleIcons) {
                    console.log('å›¾æ ‡æœªæ­£ç¡®æ˜¾ç¤ºï¼Œå°è¯•é‡æ–°æ¸²æŸ“');
                    // å¼ºåˆ¶é‡æ–°æ¸²æŸ“é¡µé¢
                    const container = document.getElementById("container");
                    if (container) {
                        const html = container.innerHTML;
                        container.innerHTML = '';
                        setTimeout(() => {
                            container.innerHTML = html;
                        }, 10);
                    }
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåç»‘å®šäº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹æ¸²æŸ“é¡µé¢
            renderSites();
            
            // æ·»åŠ å›¾æ ‡æ˜¾ç¤ºæ£€æŸ¥
            setTimeout(function() {
                checkAndFixIcons();
            }, 500);
            
            // ç»‘å®šè®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('settings-btn').addEventListener('click', function() {
                if (!isEditMode) {
                    enterEditMode();
                }
            });
            
            // ç»‘å®šå®ŒæˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('done-edit-btn').addEventListener('click', function() {
                if (isEditMode) {
                    exitEditMode();
                }
            });
            
            // ç»‘å®šæ·»åŠ ç½‘ç«™æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('add-site-btn').addEventListener('click', function() {
                if (isEditMode) {
                    // æ¸…ç©ºè¡¨å•
                    document.getElementById('siteForm').reset();
                    document.getElementById('siteModalLabel').textContent = 'æ·»åŠ ç½‘ç«™';
                    
                    // é‡ç½®å›¾æ ‡é¢„è§ˆ
                    document.getElementById('iconPreview').style.display = 'none';
                    document.getElementById('textIconPreview').style.display = 'none';
                    document.getElementById('iconStatus').textContent = 'è¯·è¾“å…¥URLè‡ªåŠ¨è·å–å›¾æ ‡';
                    document.getElementById('siteIcon').value = '';
                    
                    // å¡«å……ç±»åˆ«é€‰é¡¹
                    populateCategoryOptions();
                    
                    // æ˜¾ç¤ºæ¨¡æ€æ¡†
                    // ä½¿ç”¨Bootstrapçš„åŸç”Ÿæ–¹æ³•
                    openModal();
                }
            });
            
            // é˜²æŠ–å‡½æ•°
            let faviconTimeout;
            
            // URLéªŒè¯æ­£åˆ™è¡¨è¾¾å¼
        function isValidUrl(string) {
            console.log('éªŒè¯URL:', string);
            // å…ˆå°è¯•ç›´æ¥ä½œä¸ºURLè§£æ
            try {
                new URL(string);
                console.log('ç›´æ¥è§£ææˆåŠŸ');
                return true;
            } catch (e) {
                console.log('ç›´æ¥è§£æå¤±è´¥:', e);
                // å¦‚æœè§£æå¤±è´¥ï¼Œå°è¯•æ·»åŠ åè®®åå†è§£æ
                try {
                    new URL('http://' + string);
                    console.log('æ·»åŠ åè®®åè§£ææˆåŠŸ');
                    return true;
                } catch (e) {
                    console.log('æ·»åŠ åè®®åè§£æå¤±è´¥:', e);
                    // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼éªŒè¯
                    const urlPattern = /^([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;
                    const result = urlPattern.test(string);
                    console.log('æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ç»“æœ:', result);
                    return result;
                }
            }
        }
            
            // ç»‘å®šURLè¾“å…¥æ¡†å˜åŒ–äº‹ä»¶ï¼Œè‡ªåŠ¨è·å–å›¾æ ‡
            document.getElementById('siteUrl').addEventListener('input', function() {
                const url = this.value;
                const siteName = document.getElementById('siteName').value;
                
                // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
                clearTimeout(faviconTimeout);
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„URL
                if (url && isValidUrl(url)) {
                    // è®¾ç½®æ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿ500msæ‰§è¡Œ
                    faviconTimeout = setTimeout(() => {
                        getFavicon(url, siteName);
                    }, 500);
                }
            });
            
            // ç»‘å®šURLè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹äº‹ä»¶
            document.getElementById('siteUrl').addEventListener('blur', function() {
                const url = this.value;
                const siteName = document.getElementById('siteName').value;
                
                // æ£€æŸ¥URLæ˜¯å¦æœ‰æ•ˆ
                if (url) {
                    if (isValidUrl(url)) {
                        // URLæœ‰æ•ˆï¼Œè·å–å›¾æ ‡
                        getFavicon(url, siteName);
                    } else {
                        // URLæ— æ•ˆï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º
                        document.getElementById('iconStatus').textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç½‘ç«™åœ°å€';
                    }
                }
            });
            
            // ç»‘å®šç½‘ç«™åç§°è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹äº‹ä»¶
            document.getElementById('siteName').addEventListener('blur', function() {
                const siteName = this.value;
                
                // æ£€æŸ¥ç½‘ç«™åç§°é•¿åº¦
                if (siteName.length > 4) {
                    // æ˜¾ç¤ºé”™è¯¯æç¤º
                    alert('ç½‘ç«™åç§°æœ€å¤š4ä¸ªå­—');
                    // æˆªå–å‰4ä¸ªå­—ç¬¦
                    this.value = siteName.substring(0, 4);
                }
            });
            
            // ç»‘å®šç½‘ç«™åç§°è¾“å…¥æ¡†å˜åŒ–äº‹ä»¶ï¼Œæ›´æ–°æ–‡å­—å›¾æ ‡
            document.getElementById('siteName').addEventListener('input', function() {
                const url = document.getElementById('siteUrl').value;
                const siteName = this.value;
                if (!url && siteName) {
                    useTextIcon(siteName);
                }
            });
            
            // ç»‘å®šä¿å­˜ç½‘ç«™æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('saveSiteBtn').addEventListener('click', function() {
                if (isEditMode) {
                    // æ£€æŸ¥æ˜¯æ·»åŠ è¿˜æ˜¯ç¼–è¾‘æ¨¡å¼
                    const modalTitle = document.getElementById('siteModalLabel').textContent;
                    if (modalTitle === 'ç¼–è¾‘ç½‘ç«™') {
                        // ç¼–è¾‘æ¨¡å¼
                        const storedData = loadStoredData();
                        if (storedData) {
                            // è·å–å½“å‰ç¼–è¾‘çš„ç½‘ç«™ID
                            // è¿™é‡Œéœ€è¦é€šè¿‡æŸç§æ–¹å¼ä¼ é€’ç½‘ç«™IDï¼Œæš‚æ—¶ä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡
                            saveEditedSite(window.currentEditSiteId, storedData);
                        }
                    } else {
                        // æ·»åŠ æ¨¡å¼
                        saveSite();
                    }
                }
            });
            
            // ç»‘å®šå¯¼å‡ºé…ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('export-config-btn').addEventListener('click', function() {
                if (isEditMode) {
                    exportConfiguration();
                }
            });
            
            // ç»‘å®šæ–‡ä»¶è¾“å…¥å…ƒç´ çš„changeäº‹ä»¶
            document.getElementById('import-file-input').addEventListener('change', function(event) {
                if (isEditMode && event.target.files.length > 0) {
                    importConfiguration(event.target.files[0]);
                }
            });
            
            // ç»‘å®šä¿®æ”¹èƒŒæ™¯å›¾æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('change-bg-btn').addEventListener('click', function() {
                if (isEditMode) {
                    document.getElementById('bg-image-input').click();
                }
            });
            
            // ç»‘å®šèƒŒæ™¯å›¾è¾“å…¥å…ƒç´ çš„changeäº‹ä»¶
            document.getElementById('bg-image-input').addEventListener('change', function(event) {
                if (isEditMode && event.target.files.length > 0) {
                    changeBackgroundImage(event.target.files[0]);
                }
            });
            
            // ç»‘å®šæ¢å¤é»˜è®¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.getElementById('reset-default-btn').addEventListener('click', function() {
                if (isEditMode) {
                    if (confirm('ç¡®å®šè¦æ¢å¤é»˜è®¤è®¾ç½®å—ï¼Ÿè¿™å°†åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰æ“ä½œï¼ŒåŒ…æ‹¬æ·»åŠ çš„ç½‘ç«™ã€åˆ é™¤çš„ç½‘ç«™ã€ç½‘ç«™æ’åºç­‰ã€‚')) {
                        resetToDefault();
                    }
                }
            });
        
        // å¯¼å‡ºé…ç½®åŠŸèƒ½
        function exportConfiguration() {
            // è·å–å½“å‰å­˜å‚¨çš„æ•°æ®
            const storedData = loadStoredData();
            if (!storedData) {
                alert('æ‚¨è¿˜æ²¡æœ‰è¿›è¡Œä»»ä½•è‡ªå®šä¹‰ä¿®æ”¹ï¼Œè¯·ä¿®æ”¹åå†å¯¼å‡ºé…ç½®');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰è‡ªå®šä¹‰æ•°æ®
            const hasCustomData = 
                (storedData.customSites && Object.keys(storedData.customSites).length > 0) ||
                (storedData.deletedSites && storedData.deletedSites.length > 0) ||
                (storedData.siteOrder && Object.keys(storedData.siteOrder).length > 0) ||
                (storedData.customCategories && storedData.customCategories.length > 0);
                
            if (!hasCustomData) {
                alert('æ‚¨è¿˜æ²¡æœ‰è¿›è¡Œä»»ä½•è‡ªå®šä¹‰ä¿®æ”¹ï¼Œè¯·ä¿®æ”¹åå†å¯¼å‡ºé…ç½®');
                return;
            }
            
            // åˆ›å»ºè¦å¯¼å‡ºçš„æ•°æ®å¯¹è±¡
            const exportData = {
                version: '1.0',
                timestamp: new Date().toISOString(),
                customSites: storedData.customSites,
                deletedSites: storedData.deletedSites,
                siteOrder: storedData.siteOrder,
                customCategories: storedData.customCategories
            };
            
            // å°†æ•°æ®è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²
            const jsonData = JSON.stringify(exportData, null, 2);
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'navigation-config-' + new Date().toISOString().slice(0, 10) + '.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('é…ç½®å·²å¯¼å‡º');
        }
        
        // å¯¼å…¥é…ç½®åŠŸèƒ½
        function importConfiguration(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    // è§£æJSONæ•°æ®
                    const importData = JSON.parse(e.target.result);
                    
                    // éªŒè¯æ•°æ®æ ¼å¼
                    if (!importData.version || !importData.customSites) {
                        alert('æ— æ•ˆçš„é…ç½®æ–‡ä»¶æ ¼å¼');
                        return;
                    }
                    
                    // è·å–å½“å‰å­˜å‚¨çš„æ•°æ®
                    const currentData = loadStoredData() || {
                        customSites: {},
                        deletedSites: [],
                        siteOrder: {},
                        customCategories: []
                    };
                    
                    // åˆå¹¶å¯¼å…¥çš„æ•°æ®
                    // åˆå¹¶è‡ªå®šä¹‰ç½‘ç«™
                    for (const category in importData.customSites) {
                        if (!currentData.customSites[category]) {
                            currentData.customSites[category] = [];
                        }
                        // æ·»åŠ å¯¼å…¥çš„ç½‘ç«™ï¼ˆé¿å…é‡å¤ï¼‰
                        importData.customSites[category].forEach(site => {
                            const exists = currentData.customSites[category].some(s => s.id === site.id);
                            if (!exists) {
                                currentData.customSites[category].push(site);
                            }
                        });
                    }
                    
                    // åˆå¹¶åˆ é™¤çš„ç½‘ç«™åˆ—è¡¨
                    importData.deletedSites.forEach(siteId => {
                        if (!currentData.deletedSites.includes(siteId)) {
                            currentData.deletedSites.push(siteId);
                        }
                    });
                    
                    // åˆå¹¶ç½‘ç«™æ’åºä¿¡æ¯
                    for (const category in importData.siteOrder) {
                        if (!currentData.siteOrder[category]) {
                            currentData.siteOrder[category] = [];
                        }
                        // åˆå¹¶æ’åºä¿¡æ¯ï¼ˆé¿å…é‡å¤ï¼‰
                        importData.siteOrder[category].forEach(siteId => {
                            if (!currentData.siteOrder[category].includes(siteId)) {
                                currentData.siteOrder[category].push(siteId);
                            }
                        });
                    }
                    
                    // åˆå¹¶è‡ªå®šä¹‰ç±»åˆ«
                    importData.customCategories.forEach(category => {
                        if (!currentData.customCategories.includes(category)) {
                            currentData.customCategories.push(category);
                        }
                    });
                    
                    // ä¿å­˜åˆå¹¶åçš„æ•°æ®
                    const success = saveStoredData(currentData);
                    if (success) {
                        // é‡æ–°æ¸²æŸ“é¡µé¢
                        renderSites();
                        alert('é…ç½®å¯¼å…¥æˆåŠŸ');
                    } else {
                        alert('é…ç½®å¯¼å…¥å¤±è´¥');
                    }
                } catch (error) {
                    console.error('å¯¼å…¥é…ç½®æ—¶å‡ºé”™:', error);
                    alert('å¯¼å…¥é…ç½®æ—¶å‡ºé”™: ' + error.message);
                }
            };
            reader.readAsText(file);
        }
        
        // æ¢å¤é»˜è®¤åŠŸèƒ½
        function resetToDefault() {
            try {
                // æ¸…ç©ºlocalStorageä¸­çš„è‡ªå®šä¹‰æ•°æ®
                const initialData = {
                    customSites: {},
                    deletedSites: [],
                    siteOrder: {},
                    customCategories: []
                };
                localStorage.setItem(DEFAULT_STORAGE_KEY, JSON.stringify(initialData));
                
                // æ¸…é™¤è‡ªå®šä¹‰èƒŒæ™¯å›¾
                localStorage.removeItem('customBackgroundImage');
                
                // é‡æ–°æ¸²æŸ“é¡µé¢
                renderSites();
                
                // æ¢å¤é»˜è®¤èƒŒæ™¯å›¾
                const bgImage = document.querySelector('.banner-video img');
                if (bgImage) {
                    bgImage.src = "https://gitee.com/shao_1/shortcut/raw/master/th3.jpeg";
                    bgImage.setAttribute('data-src', "https://gitee.com/shao_1/shortcut/raw/master/th3.jpeg");
                    bgImage.classList.remove('loaded');
                    bgImage.classList.add('lazy-image');
                    // ç§»é™¤è‡ªå®šä¹‰æ ·å¼
                    bgImage.style.width = '';
                    bgImage.style.height = '';
                    bgImage.style.objectFit = '';
                }
                
                alert('å·²æ¢å¤é»˜è®¤è®¾ç½®');
            } catch (error) {
                console.error('æ¢å¤é»˜è®¤è®¾ç½®æ—¶å‡ºé”™:', error);
                alert('æ¢å¤é»˜è®¤è®¾ç½®æ—¶å‡ºé”™: ' + error.message);
            }
        }
        
        // ä¿®æ”¹èƒŒæ™¯å›¾åŠŸèƒ½
        function changeBackgroundImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    // å°†èƒŒæ™¯å›¾ä¿å­˜åˆ°localStorage
                    localStorage.setItem('customBackgroundImage', e.target.result);
                    
                    // æ›´æ–°é¡µé¢èƒŒæ™¯å›¾
                    updateBackgroundImage();
                    
                    alert('èƒŒæ™¯å›¾å·²æ›´æ–°');
                } catch (error) {
                    console.error('æ›´æ–°èƒŒæ™¯å›¾æ—¶å‡ºé”™:', error);
                    alert('æ›´æ–°èƒŒæ™¯å›¾æ—¶å‡ºé”™: ' + error.message);
                }
            };
            reader.readAsDataURL(file);
        }
        
        // æ›´æ–°é¡µé¢èƒŒæ™¯å›¾
        function updateBackgroundImage() {
            // ä»localStorageè·å–è‡ªå®šä¹‰èƒŒæ™¯å›¾
            const customBgImage = localStorage.getItem('customBackgroundImage');
            const bgImage = document.querySelector('.banner-video img');
            if (!bgImage) return;
            
            if (customBgImage) {
                // ä½¿ç”¨è‡ªå®šä¹‰èƒŒæ™¯å›¾
                bgImage.src = customBgImage;
                // ç¡®ä¿å›¾ç‰‡åº”ç”¨äº†æ­£ç¡®çš„ç±»åå’Œæ ·å¼
                bgImage.classList.add('lazy-image');
                bgImage.classList.add('loaded'); // ç«‹å³æ˜¾ç¤ºï¼Œä¸éœ€è¦æ‡’åŠ è½½
                bgImage.style.width = '100%';
                bgImage.style.height = 'auto';
            } else {
                bgImage.setAttribute('data-src', "https://gitee.com/shao_1/shortcut/raw/master/th3.jpeg");
                bgImage.style.width = '';
            }
        }
        
        },
        
        
        // é¡µé¢åŠ è½½å®Œæˆåä¸ºæŠ˜æ‰£è¯è´¹å›¾æ ‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            }));
    </script>
</body>
</html>